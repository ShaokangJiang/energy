<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
    <title>Energy -- setting
        <!--{cn}能量 -- 设置-->
    </title>

    <!-- CSS  -->
    <link href="css/icon.css" rel="stylesheet">
    <link href="css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <script src="./js/solver.js"></script>
    <script src="./js/jquery-2.1.1.min.js"></script>
    <script src="./js/translater.min.js"></script>
    <script src="./js/papaparse.min.js"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>

<body>

    <nav class="Maroon" role="navigation">
        <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Setting<!--{cn}设置--></a>

            <ul class="right hide-on-med-and-down">
                <li id="nav-cn"><a href="javascript:;" onclick="tran.setLang('cn');document.getElementById('nav-en').className = '';document.getElementById('nav-en-m').className = '';document.getElementById('nav-cn-m').className = 'active';document.getElementById('nav-cn').className = 'active';">中文</a></li>
                <li id="nav-en" class="active"><a href="javascript:;" onclick="tran.setLang('default');document.getElementById('nav-en').className = 'active';document.getElementById('nav-en-m').className = 'active';document.getElementById('nav-cn').className = '';document.getElementById('nav-cn-m').className = '';">EN</a></li>
            </ul>

            <ul id="nav-mobile" class="sidenav">
                <li id="nav-cn-m"><a href="javascript:;" onclick="tran.setLang('cn');document.getElementById('nav-en').className = '';document.getElementById('nav-en-m').className = '';document.getElementById('nav-cn-m').className = 'active';document.getElementById('nav-cn').className = 'active';">中文</a></li>
                <li id="nav-en-m" class="active"><a href="javascript:;" onclick="tran.setLang('default');document.getElementById('nav-en').className = 'active';document.getElementById('nav-en-m').className = 'active';document.getElementById('nav-cn').className = '';document.getElementById('nav-cn-m').className = '';">EN</a></li>
            </ul>
            <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">translate</i></a>

        </div>
    </nav>

    <br><br>


    <div class="row">
        <div class="col s0 m0 l1">
        </div>


        <div class="col s12 m12 l5">
            <div class="card white z-depth-3">
                <div class="card-content black-text">
                    <span class="card-title">General Introduction<!--{cn}总体介绍--></span>
                    <p>Welcome to this combination energy tool.
                        <!--{cn}欢迎使用这个组合能量工具。-->
                    </p>
                    <p>Data file input will be shown once you set up threshold setting.
                        <!--{cn}一旦设置了阈值设置，将显示数据文件输入。--><span id="Speed_text"></span></p>
                    <!--General inro, including equation, description, usage -->

                    <h5>Usage
                        <!--{cn}用法-->
                    </h5>
                    <p><span>Each field means the threshold of each component except wave. In the case of wave, the threshold needs to be pre-calculated using
                        <!--{cn}每个场都是除波以外的每个分量的阈值。在使用波浪的情况下，需要使用--></span>$H^2T$. <span>User usage is in kwh per day or unit time, the unit time refers to the refresh frequency, which will be used to calculate energy produced in the frame of time.
                        <!--{cn} 预先计算阈值。用户使用单位时间或每天kwh，单位时间指刷新频率，用于计算该时间段内的发电量。--></span></p>

                    <p> The way to calculate energy produced per unit time: a KWH = b KW*s/3600, a is the result, b is the current power, a is the calculated energy. s is the refresh frequency. Refresh frequency in this form is in ms(milliseconds).
                        <!--{cn}单位时间内产生的能量计算方法:a KWH = b KW*s/3600, a为结果，b为当前功率，a为计算能量。s是刷新频率。这种形式的刷新频率以ms(毫秒)为单位。-->
                    </p>
                    <p>In the manual setting, you are able to choose to provide user usage data in the future, usually this means to have a column of data recording user consumption per unit time, it will be used as a source of consumming power. If that
                        file doesn't have user usage, you could set it at here. In the auto generate mode, you have to provide one to let us find the optimal solution(guess a possible one would be fine).
                        <!--{cn}在手动设置中，你可以选择在将来提供用户使用数据，通常这意味着有一列数据记录每单位时间的用户消耗，它将被用作消耗能源。 如果该文件没有用户用法，可以在这里设置它。 在自动生成模式，你必须提供一个让我们找到最佳的解决方案(猜一个大概就好)。-->
                    </p>
                    <h5>Calculation Equation
                        <!--{cn}计算方法-->
                    </h5>

                    <p><b>Wave<!--{cn}波浪能--></b>: $P_{total}=0.6*11*H^2T=6.6H^2T$ <span>H - height of wave T - period<!--{cn}H - 波高 T - 周期--></span></p>

                    <p><b>Ocean Current<!--{cn}海流能--></b>: $P=\frac{\rho v^3 S C_p}{2}=\frac{1050 v^3 \pi1.3^2* 0.45}{2}=1254v^3$ <span>P is the energy captured by the unit, ρ is the fluid density, V is the fluid velocity, and S is the swept area of the impeller<!--{cn}P为机组捕获的能源,ρ为流体密度 , v 为流体 速度, S 为叶轮的扫及面积--></span>$C_p$<span> is the energy utilization coefficient<!--{cn} 为能量利用系数--></span></p>

                    <p><b>Light<!--{cn}光--></b>: $P=\frac{798*H_A}{365*24}=0.09*H_A, H_A$ <span>Total solar radiation per unit area<!--{cn}单位面积太阳能辐照总量--></span></p>

                    <p><b>Wind<!--{cn}风--></b>: $P=\frac{\rho v^3 S C_p}{2}=\frac{1.293 v^3 9852* 0.45}{2}=2866v^3$ <span>P is the energy captured by the unit, ρ is the fluid density, V is the fluid velocity, and S is the swept area of the impeller<!--{cn}P为机组捕获的能源,ρ为流体密度 , v 为流体 速度, S 为叶轮的扫及面积--></span>$C_p$<span> is the energy utilization coefficient<!--{cn} 为能量利用系数--></span></p>

                    <h5>Intro
                        <!--{cn}介绍-->
                    </h5>
                    <p>Check README on
                        <!--{cn}查看--><a href="https://github.com/ShaokangJiang/energy">Github</a> about data file format, fake data file generation and other detailed perspective.
                        <!--{cn}上的自述文件，了解数据文件格式，假数据文件生成和其他详细的细节。-->
                    </p>
                    <p>Check
                        <!--{cn}通过--><a href="https://shaokang.ga/2020/Optimal-Energy-Production/">this post<!--{cn}本文(英文)--></a> to know motivation of designing optimization model and the comparison of different model, and also the final choice.
                        <!--{cn}了解设计优化模型的动机和不同模型的比较，以及最终的选择。-->
                    </p>

                    <p>Check
                        <!--{cn}查看--><a href="https://github.com/ShaokangJiang/energy-javafx">this repository<!--{cn}此存储库--></a> for the java implementation of this project(still in development).
                        <!--{cn}以了解此项目的 java 实现(仍在开发中)。-->
                    </p>


                </div>
            </div>
        </div>

        <div class="col s12 m12 l5">
            <div class="card white z-depth-3">

                <div id="handling-progress" class="">
                    <div id="handling" class=""></div>
                </div>
                <div class="card-content black-text">
                    <span class="card-title">Threshold Setting<!--{cn}阈值调整--></span>
                    <p>Adjust setting as you want. Two types are provided.
                        <!--{cn}根据需要调整设置。提供两种类型。-->
                    </p>
                    <span id="notification"></span>
                </div>

                <div class="card-action">

                    <form id="login" name="login" method="GET" action="run.html" onsubmit="return checkForm()">
                        <div class="row">
                            <p>
                                <label>
                              <input class="with-gap" id="radio1" name="group1" type="radio" value="1" onclick="select1()"/>
                              <span>Manual Set Threshold<!--{cn}手动设定阈值--></span>
                            </label>
                            </p>


                            <div class="input-field col s6">
                                <input disabled id="wind" name="wind" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="wind">Wind(mph)<!--{cn}风速(每小时英里)--></label>
                            </div>
                            <div class="input-field col s6">
                                <input disabled id="light" name="light" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="light">Light(LUX)<!--{cn}光(流明)--></label>
                            </div>
                            <div class="input-field col s6">
                                <input disabled id="wave" name="wave" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="wave">Wave<!--{cn}波浪--></label>
                            </div>
                            <div class="input-field col s6">
                                <input disabled id="current" name="current" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="current">Ocean Current<!--{cn}洋流--></label>
                            </div>

                            <p class="col s12"><label>
                                <input id="future" name="future" type="checkbox" disabled/>
                                <span>Using the first 30 input data to optimize and get the best possible threshold. <!--{cn}利用前30个输入数据进行优化，得到最佳阈值。--></span>
                              </label></p>

                            <p class="col s6"><label>
                                <input class="with-gap" id="radio2" name="group1" type="radio" checked value="2" onclick="select2()"/>
                                <span>Use History Data<!--{cn}使用历史数据--></span>
                              </label>
                            </p>

                            <div class="input-field col s6">
                                <input id="battery" name="battery" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="battery">Battery capacity(KWH)<!--{cn}电池容量(千瓦时)--></label>
                            </div>

                            <div class="input-field col s6">
                                <input id="freq" name="freq" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="freq">Refresh Frequency(ms)<!--{cn}刷新频率(毫秒)--></label>
                            </div>

                            <div class="input-field col s6">
                                <input id="User" name="User" type="text" class="validate" onkeyup="this.value=this.value.replace(/[^\d]/g,'') " onafterpaste="this.value=this.value.replace(/[^\d]/g,'') ">
                                <label for="User">User Usage(kwh/unit time(hrs/freq))<!--{cn}使用量(千瓦时/单位时间(小时/频率))--></label>
                            </div>

                            <div class="file-field input-field col s6">

                                <div class="btn">
                                    <span>File</span>
                                    <input id="history_data" name="history_data" type="file" accept=".csv,text/csv" onchange="loadFile(this)">
                                </div>
                                <div class="file-path-wrapper">
                                    <input placeholder="History data" placeholder-cn="历史数据" id="hist_data" class="file-path validate" type="text">
                                </div>
                            </div>


                            <p class="col s6"><label>
                                    <input id="userUsage" type="checkbox" onchange="userUsageSwitch(this);" disabled/>
                                    <span>I will provide user data in input file in the next page<!--{cn}我将在下一页的输入文件中提供用户数据--></span>
                                  </label></p>






                            <p class="col s9"></p>
                            <button id="submission" class="btn waves-effect waves-light col s3" type="submit" name="action" disabled>Submit<!--{cn}提交-->
                      
                      
                            <i class="material-icons right">send</i>
                    </button>

                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col s0 m0 l1">
        </div>

    </div>

    <br><br>
    </div>

    <footer class="page-footer orange">
        <div class="container">
            <div class="row">
                <h5 class="white-text">Info
                    <!--{cn}信息-->
                </h5>
                <p class="grey-text text-lighten-4">Nothing here.
                    <!--{cn}什么都没有-->
                </p>



            </div>
            <div class="footer-copyright">
                <div class="container">
                    Made by
                    <!--{cn}由--><a class="orange-text text-lighten-3" href="https://shaokang.ga">Shaokang Jiang</a> using
                    <!--{cn}使用--><a class="orange-text text-lighten-3" href="http://materializecss.com">Materialize<!--{cn}Materialize 主题制作--></a>
                </div>
            </div>
    </footer>


    <!--  Scripts-->

    <script src="./js/materialize.min.js"></script>
    <script>
        M.AutoInit();

        var file;

        function loadFile(use) {
            if (use.files[0] != null && use.files[0].name.indexOf(".csv") != -1) {
                file = use.files[0];
                var successfully = false;
                Papa.parse(file, {
                    header: true,
                    skipEmptyLines: true,
                    dynamicTyping: true,
                    preview: 1,
                    step: function(results, parser) {
                        if (results.data.hasOwnProperty("wind_value") && results.data.hasOwnProperty("wind_count") && results.data.hasOwnProperty("light_value") && results.data.hasOwnProperty("light_count") && results.data.hasOwnProperty("wave_value") && results.data.hasOwnProperty("wave_count") && results.data.hasOwnProperty("current_value") && results.data.hasOwnProperty("current_count")) {
                            successfully |= true;
                        }
                    },
                    complete: function(results, parser) {
                        if (successfully == 1) {
                            if (tran.getLang() == 'cn') document.getElementById("notification").innerHTML = '<font color="red">成功载入</font>';
                            else document.getElementById("notification").innerHTML = '<font color="red">Successfully loaded</font>';
                            document.getElementById("submission").disabled = false;
                        } else {
                            if (tran.getLang() == 'cn') document.getElementById("notification").innerHTML = '<font color="red">无效的文件内容。</font>';
                            else document.getElementById("notification").innerHTML = '<font color="red">Invalid file content.</font>';
                            document.getElementById("submission").disabled = true;
                        }
                    }
                });
            } else {
                use.value = '';
                if (tran.getLang() == 'cn') document.getElementById("notification").innerHTML = '<font color="red">请选择一个csv文件</font>';

                else document.getElementById("notification").innerHTML = '<font color="red">Please select a csv file. </font>';

            }
        }

        function userUsageSwitch(use) {
            if (use.checked) {
                document.getElementById("User").disabled = true;
            } else {
                document.getElementById("User").disabled = false;
            }
        }

        function checkForm() {
            if (checkFormValid()) {
                return false;
            } else {
                location.href = "run.html";
            }
            return true;
        }

        function checkFormValid() {

            document.getElementById('handling').className = 'indeterminate';
            document.getElementById('submission').disabled = true;
            document.getElementById('handling-progress').className = 'progress';
            if (document.getElementById("radio1").checked == true) {
                if (document.getElementById("wind").value == "" ||
                    document.getElementById("light").value == "" || document.getElementById("wave").value == "" ||
                    document.getElementById("current").value == "" || document.getElementById("battery").value == "" ||
                    document.getElementById("freq").value == "" || (document.getElementById("User").disabled == false && document.getElementById("User").value == "")) {


                    if (tran.getLang() == 'cn') document.getElementById("notification").innerHTML = '<font color="red">您需要填写所有空字段。</font>';

                    else
                        document.getElementById("notification").innerHTML = '<font color="red">You need to fill all empty fields. </font>';

                    if (document.getElementById("wind").value == "") document.getElementById("wind").className = 'invalid';
                    else document.getElementById("wind").className = '';
                    if (document.getElementById("light").value == "") document.getElementById("light").className = 'invalid';
                    else document.getElementById("light").className = '';
                    if (document.getElementById("wave").value == "") document.getElementById("wave").className = 'invalid';
                    else document.getElementById("wave").className = '';
                    if (document.getElementById("current").value == "") document.getElementById("current").className = 'invalid';
                    else document.getElementById("current").className = '';
                    if (document.getElementById("battery").value == "") document.getElementById("battery").className = 'invalid';
                    else document.getElementById("battery").className = '';
                    if (document.getElementById("freq").value == "") document.getElementById("freq").className = 'invalid';
                    else document.getElementById("freq").className = '';
                    if (document.getElementById("User").disabled == false && document.getElementById("User").value == "") document.getElementById("User").className = 'invalid';
                    else document.getElementById("User").className = '';
                    document.getElementById('handling').className = '';
                    document.getElementById('handling-progress').className = '';
                    document.getElementById('submission').disabled = false;
                    return true;
                };
                return false;
            }
            if (document.getElementById("radio2").checked == true) {
                if (document.getElementById("User").value == "" || document.getElementById("freq").value == "" ||
                    document.getElementById("hist_data").value == "" || document.getElementById("history_data").value == "" || document.getElementById("battery").value == "") {
                    if (tran.getLang() == 'cn') document.getElementById("notification").innerHTML = '<font color="red">您需要填写所有空字段。</font>';

                    else
                        document.getElementById("notification").innerHTML = '<font color="red">You need to fill all empty fields. </font>';

                    if (document.getElementById("battery").value == "") document.getElementById("battery").className = 'invalid';
                    else document.getElementById("battery").className = '';
                    if (document.getElementById("freq").value == "") document.getElementById("freq").className = 'invalid';
                    else document.getElementById("freq").className = '';
                    if (document.getElementById("User").disabled == false && document.getElementById("User").value == "") document.getElementById("User").className = 'invalid';
                    else document.getElementById("User").className = '';
                    if (document.getElementById("hist_data").value == "") document.getElementById("hist_data").className = 'file-path validate invalid';
                    else document.getElementById("hist_data").className = 'file-path validate';
                    document.getElementById('handling').className = '';
                    document.getElementById('handling-progress').className = '';
                    document.getElementById('submission').disabled = false;
                    return true;
                };
                //solve some optimization problem at here

                var days = 0;
                var model = {};
                var idx = 0;
                var result;
                var freq = parseFloat(document.getElementById("freq").value) / 3600000;
                console.log(freq);
                model["optimize"] = "count";
                model["opType"] = "min";
                model["constraints"] = {};
                model["variables"] = {};
                model["ints"] = {};
                var data_input = {};
                Papa.parse(file, {
                    header: true,
                    skipEmptyLines: true,
                    dynamicTyping: true,
                    step: function(results, parser) {
                        //console.log("Row data:", results.data);
                        //analyze data at here
                        //use == " " || == null to check empty
                        if (!(results.data["wind_value"] == " " || results.data["wind_value"] == null)) {
                            var variable_wind = "v" + idx + "0";
                            data_input[variable_wind] = results.data["wind_value"];
                            model.ints[variable_wind] = 1;
                            model.variables[variable_wind] = {
                                "value": results.data["wind_value"] * results.data["wind_count"] * freq,
                                "count": results.data["wind_count"]
                            };
                            model.variables[variable_wind][variable_wind] = 1;
                            model.constraints[variable_wind] = {
                                "min": 0,
                                "max": 1
                            };
                            days += results.data["wind_count"];
                        }

                        if (!(results.data["light_value"] == " " || results.data["light_value"] == null)) {
                            var variable_light = "v" + idx + "1";
                            data_input[variable_light] = results.data["light_value"];
                            model.ints[variable_light] = 1;
                            model.variables[variable_light] = {
                                "value": results.data["light_value"] * results.data["light_count"] * freq,
                                "count": results.data["light_count"]
                            };
                            model.variables[variable_light][variable_light] = 1;
                            model.constraints[variable_light] = {
                                "min": 0,
                                "max": 1
                            };
                        }

                        if (!(results.data["wave_value"] == " " || results.data["wave_value"] == null)) {
                            var variable_wave = "v" + idx + "2";
                            data_input[variable_wave] = results.data["wave_value"];
                            model.ints[variable_wave] = 1;
                            model.variables[variable_wave] = {
                                "value": results.data["wave_value"] * results.data["wave_count"] * freq,
                                "count": results.data["wave_count"]
                            };
                            model.variables[variable_wave][variable_wave] = 1;
                            model.constraints[variable_wave] = {
                                "min": 0,
                                "max": 1
                            };
                        }

                        if (!(results.data["current_value"] == " " || results.data["current_value"] == null)) {
                            var variable_current = "v" + idx + "3";
                            data_input[variable_current] = results.data["current_value"];
                            model.ints[variable_current] = 1;
                            model.variables[variable_current] = {
                                "value": results.data["current_value"] * results.data["current_count"] * freq,
                                "count": results.data["current_count"]
                            };
                            model.variables[variable_current][variable_current] = 1;
                            model.constraints[variable_current] = {
                                "min": 0,
                                "max": 1
                            };
                        }
                        idx++;
                    },
                    complete: function(results, parser) {
                        console.log(parseFloat(document.getElementById("User").value));
                        console.log(parseInt(document.getElementById("battery").value));
                        var limits = days * parseFloat(document.getElementById("User").value) + parseInt(document.getElementById("battery").value);
                        model.constraints["value"] = {
                            "min": limits
                        };
                        console.log(model);
                        result = solver.Solve(model);

                        console.log(result);

                        var wind_limit = -1;
                        var light_limit = -1;
                        var wave_limit = -1;
                        var current_limit = -1;

                        for (var key in result) {
                            if (data_input.hasOwnProperty(key)) {
                                console.log(key + " -> " + data_input[key]);
                                switch (parseInt(key.slice(-1))) {
                                    case 0:
                                        if (wind_limit == -1) wind_limit = data_input[key];
                                        if (data_input[key] <= wind_limit) wind_limit = data_input[key];
                                        break;
                                    case 1: //light
                                        if (light_limit == -1) light_limit = data_input[key];
                                        if (data_input[key] <= light_limit) light_limit = data_input[key];
                                        // code block
                                        break;
                                    case 2: //wave
                                        if (wave_limit == -1) wave_limit = data_input[key];
                                        if (data_input[key] <= wave_limit) wave_limit = data_input[key];
                                        // code block
                                        break;
                                    case 3: //current
                                        if (current_limit == -1) current_limit = data_input[key];
                                        if (data_input[key] <= current_limit) current_limit = data_input[key];
                                        // code block
                                        break;

                                    default:
                                        // code block
                                }
                            }
                        }

                        document.getElementById("wind").value = (wind_limit == -1) ? 6 : (Math.pow((wind_limit / 2866), (1 / 3))).toFixed(2); //pre defined min value : actual optimal 
                        document.getElementById("light").value = (light_limit == -1) ? 1100 : (light_limit / 0.09).toFixed(2);
                        document.getElementById("wave").value = (wave_limit == -1) ? 2 : (wave_limit / 6.6).toFixed(2);
                        document.getElementById("current").value = (current_limit == -1) ? 2 : (Math.pow((current_limit / 1254), (1 / 3))).toFixed(2);
                        console.log("wind:" + wind_limit + "light" + light_limit + "wave:" + wave_limit + "current" + current_limit);
                        console.log(result);
                        if (!result.feasible) {
                            if (tran.getLang() == 'cn')
                                document.getElementById("notification").innerHTML = '<font color="red">发现不可行的解决方案。请在提交前重新检查每个值。</font>';
                            else
                                document.getElementById("notification").innerHTML = '<font color="red">Infeasible solution found. Please recheck each value before submit.</font>';
                            select1();
                            document.getElementById("radio2").checked = false;
                            document.getElementById("radio1").checked = true;
                            document.getElementById("wind").placeholder = "";
                            document.getElementById("wind").focus();
                            document.getElementById("light").placeholder = "";
                            document.getElementById("light").focus();
                            document.getElementById("wave").placeholder = "";
                            document.getElementById("wave").focus();
                            document.getElementById("current").placeholder = "";
                            document.getElementById("current").focus();
                            document.getElementById("current").blur();
                            document.getElementById('handling').className = '';
                            document.getElementById('handling-progress').className = '';
                            document.getElementById('submission').disabled = false;
                            document.getElementById("future").disabled = true;
                        } else {
                            select1();
                            document.getElementById("radio2").checked = false;
                            document.getElementById("radio1").checked = true;
                            document.getElementById("login").submit();
                        }
                    }
                });
            }
            return true;
        }

        function select2() {

            document.getElementById("wind").disabled = true;
            document.getElementById("light").disabled = true;
            document.getElementById("wave").disabled = true;
            document.getElementById("current").disabled = true;
            document.getElementById("battery").disabled = false;
            document.getElementById("freq").disabled = false;
            document.getElementById("future").disabled = true;

            document.getElementById('submission').disabled = true; //false when valid file selected
            document.getElementById("hist_data").disabled = false;
            document.getElementById("hist_data").value = '';
            document.getElementById("history_data").disabled = false;
            document.getElementById("history_data").value = '';
            document.getElementById("userUsage").disabled = true;
            document.getElementById("User").disabled = false;

        }

        function select1() {
            document.getElementById("wind").disabled = false;
            document.getElementById("light").disabled = false;
            document.getElementById("wave").disabled = false;

            document.getElementById('submission').disabled = false; //false when valid file selected
            document.getElementById("current").disabled = false;
            document.getElementById("battery").disabled = false;
            document.getElementById("freq").disabled = false;
            document.getElementById("hist_data").disabled = true;
            document.getElementById("history_data").disabled = true;
            document.getElementById("userUsage").disabled = false;
            document.getElementById("future").disabled = false;
            userUsageSwitch(document.getElementById("userUsage"));
        }

        //1-wind 2-light 3-wave 4-current
        /**
        function optimization(model) {
            return solver.Solve(model);
            //document.getElementById("Speed_text").innerText = "feasible:" + results.feasible + ", result: " + results.result + ", bounded: " + results.bounded + ", brit: " + results.brit + ", yank: " + results.yank;
        }*/

        var tran;

        var lang = navigator.language || navigator.browserLanguage;
        if (/^zh/.test(lang)) {
            //alert('中文');
            tran = new Translater({
                lang: "cn"
            });
            document.getElementById('nav-en').className = '';
            document.getElementById('nav-cn').className = 'active';
            document.getElementById('nav-en-m').className = '';
            document.getElementById('nav-cn-m').className = 'active';
        } else {
            //alert('不是中文');
            tran = new Translater({
                lang: "en"
            });
        }
    </script>

</body>

</html>

</html>