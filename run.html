<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
    <title>Starter Template - Materialize</title>

    <!-- CSS  -->
    <link href="css/icon.css" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <script src="https://unpkg.com/javascript-lp-solver/src/solver.js"></script>
</head>

<body>
    <nav class="Maroon" role="navigation">
        <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Logo</a>
        </div>
    </nav>

    <br><br>


    <div class="row">
        <div class="col s0 m0 l1">
        </div>


        <div class="col s12 m12 l7">

            <div class="row">
                <div class="col s12">

                    <div class="card white z-depth-3">
                        <div class="card-content black-text">
                            <span class="card-title">Glance</span>
                            <p>Model goes here</p>
                        </div>
                    </div>


                </div>

                <div class="col s12">

                    <div class="card white z-depth-3">
                        <div class="card-content black-text">
                            <span class="card-title">Components</span>
                            <div class="row">
                                <div class="col s12 m6">
                                    <div class="card-panel blue">
                                        <span class="white-text">
                                            <h6>Wind</h6>
                                            <p>Status: <span id="wind_status">On</span>
                                        </p>
                                        <p>
                                            Production: <span id="wind_production">239</span>
                                        </p>
                                        <p>
                                            Current Wind: <span id="wind_Speed">66</span>
                                        </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col s12 m6">
                                    <div class="card-panel blue">
                                        <span class="white-text">
                                            <h6>Wind</h6>
                                            <p>Status: <span id="wind_status">On</span>
                                        </p>
                                        <p>
                                            Production: <span id="wind_production">239</span>
                                        </p>
                                        <p>
                                            Current Wind: <span id="wind_Speed">66</span>
                                        </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col s12 m6">
                                    <div class="card-panel blue">
                                        <span class="white-text">
                                            <h6>Wind</h6>
                                            <p>Status: <span id="wind_status">On</span>
                                        </p>
                                        <p>
                                            Production: <span id="wind_production">239</span>
                                        </p>
                                        <p>
                                            Current Wind: <span id="wind_Speed">66</span>
                                        </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col s12 m6">
                                    <div class="card-panel blue">
                                        <span class="white-text">
                                            <h6>Wind</h6>
                                            <p>Status: <span id="wind_status">On</span>
                                        </p>
                                        <p>
                                            Production: <span id="wind_production">239</span>
                                        </p>
                                        <p>
                                            Current Wind: <span id="wind_Speed">66</span>
                                        </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col s12 m6">
                                    <div class="card-panel blue">
                                        <span class="white-text">
                                            <h6>Wind</h6>
                                            <p>Status: <span id="wind_status">On</span>
                                        </p>
                                        <p>
                                            Production: <span id="wind_production">239</span>
                                        </p>
                                        <p>
                                            Current Wind: <span id="wind_Speed">66</span>
                                        </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col s12 m6">
                                    <div class="card-panel blue">
                                        <span class="white-text">
                                            <h6>Wind</h6>
                                            <p>Status: <span id="wind_status">On</span>
                                        </p>
                                        <p>
                                            Production: <span id="wind_production">239</span>
                                        </p>
                                        <p>
                                            Current Wind: <span id="wind_Speed">66</span>
                                        </p>
                                        </span>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>


                </div>

                <div class="col s12">

                    <div class="card white z-depth-3">
                        <div class="card-content black-text">
                            <span class="card-title">Export</span>
                            <p>Export result to csv at here: </p>
                            <div class="card-action">
                                <a href="#">Export</a>
                                <a href="#">This is a link</a>
                            </div>
                        </div>
                    </div>


                </div>


            </div>

        </div>


        <div class="col s12 m12 l3">
            <div class="card white z-depth-3">
                <div class="card-content black-text">
                    <span class="card-title">Control Panel</span>
                    <p>Adjust setting as you want.</p>
                </div>
                <div class="card-action">
                    <div class="row">
                        <p class="col s6">
                            <span class="right black-text">Wind Switcher
                            </span> </p>
                        <p class="switch col s6">
                            <label>
                          Off
                          <input type="checkbox" id="wind" checked onchange="console.log(this.checked);">
                          <span class="lever"></span>
                          On
                        </label>
                        </p>

                        <p class="col s6">
                            <span class="right black-text">Light Switcher
                        </span> </p>
                        <p class="switch col s6">
                            <label>
                      Off
                      <input type="checkbox" id="light" checked onchange="console.log(this.checked);">
                      <span class="lever"></span>
                      On
                    </label>
                        </p>

                        <p class="col s6">
                            <span class="right black-text">Wave Switcher
                    </span> </p>
                        <p class="switch col s6">
                            <label>
                  Off
                  <input type="checkbox" id="wave" checked onchange="console.log(this.checked);">
                  <span class="lever"></span>
                  On
                </label>
                        </p>

                        <p class="col s6">
                            <span class="right black-text">Current Switcher
                    </span> </p>
                        <p class="switch col s6">
                            <label>
                  Off
                  <input type="checkbox" id="current" checked onchange="console.log(this.checked);">
                  <span class="lever"></span>
                  On
                </label>
                        </p>

                    </div>
                </div>
            </div>
        </div>


        <div class="col s0 m0 l1">
        </div>


    </div>

    <br><br>
    </div>


    <div class="fixed-action-btn">
        <a id="menu" class="btn-floating btn-large red">
            <i class="large material-icons">menu</i>
        </a>
        <ul>
            <li><a class="btn-floating yellow darken-1" onclick="change_status()" id="Global_switch"><i class="material-icons">play_arrow</i></a></li>

            <!--change to pause-->
            <li><a class="btn-floating blue"><i class="material-icons" onclick="add()">file_upload</i></a></li>
        </ul>
    </div>


    <!-- Tap Target Structure -->
    <div class="tap-target" data-target="menu">
        <div class="tap-target-content">
            <h5>Basic Setup</h5>
            <p>File button to choose simulation file(Stream from sensor in real case). Start or pause to do related work globally. </p>
        </div>
    </div>
    <div id="UserEdit"></div>


    <footer class="page-footer orange">
        <div class="container">
            <div class="row">
                <h5 class="white-text">Info</h5>
                <p class="grey-text text-lighten-4">efe</p>



            </div>
            <div class="footer-copyright">
                <div class="container">
                    Made by <a class="orange-text text-lighten-3" href="https://shaokang.ga">Shaokang Jiang</a> using <a class="orange-text text-lighten-3" href="http://materializecss.com">Materialize</a>
                </div>
            </div>
    </footer>


    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/materialize.js"></script>
    <script>
        M.AutoInit();

        var Model_Status = 0;

        $(document).ready(function() {
            $('.fixed-action-btn').floatingActionButton();
            $('.tap-target').tapTarget('open');
        });

        // document.getElementById("Speed_text").innerText = window.localStorage.getItem("wind");
        var request = {
                QueryString: function(val) {
                    var uri = window.location.search;
                    var re = new RegExp("" + val + "=([^&?]*)", "ig");
                    return ((uri.match(re)) ? (uri.match(re)[0].substr(val.length + 1)) : null);
                }
            }
            // so, You can using request.QueryString(para), like this
        var u = request.QueryString("type2");


        function SpeedChange(x) {
            //console.log(x);
            document.getElementById("Speed_text").innerText = x;
        }

        function load(source) {
            var file = source;
            if (window.FileReader) {
                var fr = new FileReader();
                fr.readAsText(file);
                fr.onload = function() {
                    console.log('onload')
                    var html = '';
                    html = fr.result;
                    document.getElementById("Speed_text").innerText = html;
                };
                fr.onprogress = function(event) {
                    if (event.lengthComputable) {
                        document.getElementById("Speed_text").innerText = event.loaded + '/' + event.total;
                    }
                }
            }
        }

        function optimization() {
            var results,
                model = {
                    "optimize": "capacity",
                    "opType": "max",
                    "constraints": {
                        "plane": {
                            "max": 44
                        },
                        "person": {
                            "max": 512
                        },
                        "cost": {
                            "max": 300000
                        },
                        "brit": {
                            "max": 5
                        }
                    },
                    "variables": {
                        "brit": {
                            "capacity": 20000,
                            "plane": 1,
                            "person": 8,
                            "cost": 5000
                        },
                        "yank": {
                            "capacity": 30000,
                            "plane": 1,
                            "person": 16,
                            "cost": 9000
                        }
                    },
                };

            results = solver.Solve(model);
            console.log(results);
            document.getElementById("Speed_text").innerText = "feasible:" + results.feasible + ", result: " + results.result + ", bounded: " + results.bounded + ", brit: " + results.brit + ", yank: " + results.yank;
        }


        function OpenDetial(id, width, height) {
            debugger;
            var _srcWidth = parseInt(screen.width);
            var _srcHeight = parseInt(screen.height);
            _width = parseInt(width) || _srcWidth;
            _height = parseInt(height) || _srcHeight;

            var cssWidth = width == undefined ? "100%" : _width;
            var cssHeight = height == undefined ? "100%" : _height;

            var left = (_srcWidth - _width) == 0 ? 0 : ((_srcWidth - _width) / 2);
            var top = (_srcHeight - _height) == 0 ? 0 : ((_srcHeight - _height) / 2 - 100);


            var _id = "#" + id;
            var detial =
                '<div id="panel"> <div class="card white z-depth-3"><div class="card-content black-text">  <div class="row">' +
                '<div class="file-field input-field col s12"> <div class="btn"><span>File</span><input id="history_data" name="history_data" type="file" onchange="loadFile(this)"></div><div class="file-path-wrapper"><input placeholder="Input Stream" id="Input_Stream" class="file-path validate" type="text"></div></div><p class="col s8" id="notice"><p><a class="waves-effect waves-light btn col s3" onclick="CloseDetail()">Use This</a>' +
                '</div></div></div></div>';
            $(_id).html(detial);
            $(_id).css({
                "display": "none",
                "position": "absolute",
                "bottom": "10px",
                "width": "100%",
                "top": "2px",
                "height": "96%",
                "background-color": "rgba(223, 236, 236, 0.36)"
            });
            $("#panel").css({
                "width": cssWidth,
                "height": cssHeight,
                "left": left,
                "top": top,
                "position": "absolute"
            });
            $(_id).slideDown();
        }

        function CloseDetail() {
            $("#UserEdit").slideUp();
        }


        function loadFile(file) {
            console.log(file);
            document.getElementById("notice").innerText = "Successfully loaded";
        }

        function add() {
            var url = "index.html";
            OpenDetial("UserEdit", 400, 200); //调用方法        
        }

        function change_status() {
            if (Model_Status == 0) {
                document.getElementById("Global_switch").innerHTML = '<i class = "material-icons" > play_arrow </i>';
                Model_Status = 1;
            } else if (Model_Status == 1) {
                document.getElementById("Global_switch").innerHTML = '<i class = "material-icons" > pause </i>';
                Model_Status = 0;
            } else {
                document.getElementById("Global_switch").innerHTML = '<i class = "material-icons" > stop </i>';
            }
        }
    </script>

</body>

</html>